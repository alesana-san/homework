### Сущности

- Абоненты
    1) Характеризуются:
        1) уникальным кодом;
        2) текущим балансом;
        3) названием;
- История изменения сумм
    1) Характеризуется:
        1) абонентом, для которого произошло изменение баланса;
        2) кодом документа, в контексте которого произошло изменение;
        3) сумма, на которую изменяется баланс;
        4) дата изменения;
        
### Общая идея:

Пользователи имеют доступ к пакету `amount_api_pkg`. Пакет содержит процедуры:
- `insert_records` - вставляет в интерфейсную таблицу записи;
- `process_interface` - обрабатывает собранные в интерфейсе записи;

Пользователь заполняет структуру типа `amount_tab`, передает в insert_records.

Затем запускает отдельно/либо процедура работает постоянно автоматом и обрабатывает строки.

По результатам работы процессинга пользователь обрабатывает состояния записей.

В интерфейсе убраны максимально все констрейнты для максимально быстрой вставки и минимальной задержки пользовательского приложения.

### На развитие

Что можно улучшить/доработать:

1. Добавить сущность `Заголовки интерфейса` для объединения вставленных строк интерфейса в группы:
    - Можно завести и обрабатывать доп. свойства типа "Схлопнуть группу в один платеж";
    - Указывать свойство принудительной загрузки записей группы, даже если в группе были ошибки, либо группы целиком только при условии успешной вставки всех записей
2. Секционирование таблицы интерфейсов по статусам, чтобы процедура-обработчик работала только с одной партицией готовых записей;
3. Секционирование таблицы с историей платежей по дате для возможного архивирования платежей. 
4. Добавить систему логирования, чтобы логировать исключения в таблицу логов
5. Автоматизировать накат изменений через `liquibase`
6. Увеличить покрытие unit-тестами с помощью `utplsql`


